<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.18.1">
    <title>README – Custodian v0.0.1</title>
    <link rel="stylesheet" href="dist/app-c922dbe7ef.css" />
    
    <script src="dist/sidebar_items-e5a40fc2f3.js"></script>
    
    
    
    
  </head>
  <body data-type="extras">
    <script>try { if(localStorage.getItem('night-mode')) document.body.className += ' night-mode'; } catch (e) { }</script>

<div class="main">
<button class="sidebar-toggle">
  <span class="icon-menu" aria-hidden="true"></span>
  <span class="sr-only">Toggle Sidebar</span>
</button>
<section class="sidebar">

  
  <a href="readme.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        Custodian
      </h1>
      <h2 class="sidebar-projectVersion">
        v0.0.1
      </h2>
    </div>
    
  </a>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    <input name="q" type="text" id="search-list" class="search-input" placeholder="search" aria-label="Search" autocomplete="off" />
  </form>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    

    
  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">


<h1>Custodian</h1>
<p>Custodian is an opinionated GitHub bot to automate routine development tasks. It was built by <a href="https://newaperio.com">NewAperio</a> and is designed to follow our conventions.</p>
<p>Currently, Custodian performs the following functions:</p>
<ul>
<li>When a new pull request is <strong>opened</strong>, adds <code class="inline">needs-review</code> label
</li>
<li>When a pull request is <strong>closed</strong>, removes all labels and deletes branch
</li>
<li>When a pull request is <strong>reopened</strong>, removes all labels
</li>
<li>When a pull request review is <strong>approved</strong>, removes <code class="inline">needs-review</code> and <code class="inline">in-progress</code> labels and adds <code class="inline">ready-to-merge</code>; merges changes from base branch to keep head updated
</li>
<li>When a pull request review is <strong>changes requested</strong>, removes <code class="inline">needs-review</code> and <code class="inline">ready-to-merge</code> labels and adds <code class="inline">in-progress</code>
</li>
</ul>
<p>The labels Custodian applies are a part of the NewAperio <a href="https://github.com/newaperio/github-labels">spec</a>.</p>
<h2 id="installation" class="section-heading">
  <a href="#installation" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Installation
</h2>

<p>Custodian can be installed from its <a href="https://github.com/apps/custodian">GitHub app</a> page. Click the “Install” button and select which repositories to run on. Custodian will then run on any new pull requests.</p>
<h2 id="development" class="section-heading">
  <a href="#development" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Development
</h2>

<h3 id="getting-started" class="section-heading">
  <a href="#getting-started" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Getting Started
</h3>

<p>Before you begin, make sure you have the following installed and configured:</p>
<ul>
<li>BEAM, the Erlang VM
</li>
<li>Elixir
</li>
<li>Hex
</li>
<li>Mix
</li>
<li>PostgreSQL
</li>
</ul>
<p>After you’ve cloned this repo, install the dependencies with Mix:</p>
<pre><code class="elixir">% mix deps.get</code></pre>
<p>Next, initialize the database (make sure PostgreSQL is running):</p>
<pre><code class="elixir">% mix ecto.create
% mix ecto.migrate</code></pre>
<p>To start the app, run the server command:</p>
<pre><code class="elixir">% mix phoenix.server</code></pre>
<p>The server runs by default on <a href="http://localhost:4000"><code class="inline">localhost:4000</code></a>.</p>
<h3 id="documentation" class="section-heading">
  <a href="#documentation" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Documentation
</h3>

<p>The codebase is documented where appropriate. The docs are available on GitHub in HTML form. To view the docs, click <a href="https://newaperio.github.io/custodian/readme.html">here</a>.</p>
<p>To view the docs in development, run ExDoc:</p>
<pre><code class="elixir">% mix docs</code></pre>
<p>This generates an HTML version available in the <code class="inline">doc/</code> folder. Open to view:</p>
<pre><code class="elixir">% open docs/index.html</code></pre>
<p>To publish changes to the docs hosted on GitHub Pages, run the update script from master:</p>
<pre><code class="elixir">% git checkout master
% ./bin/update-docs</code></pre>
<h3 id="testing" class="section-heading">
  <a href="#testing" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Testing
</h3>

<p>This project uses Test-Driven Development. For any new feature, tests should be written to verify appropriate behavior. We prefer to avoid testing framework, project, or library behavior and instead focus on testing the business logic of the app.</p>
<p>Tests should be terse and focus on a single component, in order to avoid coupling features. This will ensure tests accurately describe a feature’s behavior.</p>
<p>Pull requests should not be accepted without appropriate tests covering any new behavior. Those PRs that fix bugs should include tests verifying the fixed issue.</p>
<p>All tests can be found in the <code class="inline">test</code> directory. To run the entire test suite, use Mix:</p>
<pre><code class="elixir">% mix test</code></pre>
<h3 id="code-style" class="section-heading">
  <a href="#code-style" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Code Style
</h3>

<p>This repo includes <a href="https://github.com/rrrene/credo">Credo</a>, a linting tool for Elixir. You can run it via Mix:</p>
<pre><code class="elixir">% mix credo</code></pre>
<p>This repo also includes <a href="https://github.com/nccgroup/sobelow">Sobelow</a>, a static analysis tool for security issues. You can run it via Mix:</p>
<pre><code class="elixir">% mix sobelow</code></pre>
<p>This repo also includes full Elixir <a href="https://hexdocs.pm/elixir/typespecs.html">typespecs</a> which can be verified by <a href="https://github.com/jeremyjh/dialyxir">Dialyzer</a>. You can run it via Mix:</p>
<pre><code class="elixir">% mix dialyzer</code></pre>
<h3 id="github-labels" class="section-heading">
  <a href="#github-labels" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Github Labels
</h3>

<p>Every issue on GitHub should be labeled appropriately with its status, area of focus, and type of implementation. We follow a <a href="https://github.com/newaperio/github-labels">standardized list</a> of labels.</p>
<p>Every PR on GitHub should be labeled appropriately with its status.</p>
<p>Here are the labels we use in this repo:</p>
<table>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th style="text-align: left">Name</th><th style="text-align: left">Color</th><th style="text-align: left">Category</th><th style="text-align: left">Description</th>
</tr>
</thead>
<tr>
<td style="text-align: left"><code class="inline">api</code></td><td style="text-align: left">black</td><td style="text-align: left">focus</td><td style="text-align: left">Issues related to the API</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">blocked</code></td><td style="text-align: left">orange</td><td style="text-align: left">status</td><td style="text-align: left">Signals an issue is blocked by extenuating circumstances</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">bug</code></td><td style="text-align: left">red</td><td style="text-align: left">type</td><td style="text-align: left">Denotes an issue related to an existing bug</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">database</code></td><td style="text-align: left">black</td><td style="text-align: left">focus</td><td style="text-align: left">Issues related to data storage</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">documentation</code></td><td style="text-align: left">black</td><td style="text-align: left">focus</td><td style="text-align: left">Issues related to documenting the code or API</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">enhancement</code></td><td style="text-align: left">light blue</td><td style="text-align: left">type</td><td style="text-align: left">Denotes an issue that is an enhancement of existing functionality</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">feature</code></td><td style="text-align: left">blue</td><td style="text-align: left">type</td><td style="text-align: left">Denotes a new feature that is planned for the app</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">in-progress</code></td><td style="text-align: left">purple</td><td style="text-align: left">status</td><td style="text-align: left">Denotes an issue actively being worked on</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">infra</code></td><td style="text-align: left">black</td><td style="text-align: left">focus</td><td style="text-align: left">Issues related to infrastructure, external services, or deployment</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">needs-review</code></td><td style="text-align: left">yellow</td><td style="text-align: left">status</td><td style="text-align: left">Denotes a PR that is finished and is awaiting peer review</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">question</code></td><td style="text-align: left">magenta</td><td style="text-align: left">status</td><td style="text-align: left">Signals a stalled issue because of outstanding question(s)</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">ready-to-merge</code></td><td style="text-align: left">green</td><td style="text-align: left">status</td><td style="text-align: left">Denotes a PR that has been reviewed and approved</td>
</tr>
<tr>
<td style="text-align: left"><code class="inline">testing</code></td><td style="text-align: left">black</td><td style="text-align: left">focus</td><td style="text-align: left">Issues related to testing the app</td>
</tr>
</table>
<h3 id="contributing" class="section-heading">
  <a href="#contributing" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Contributing
</h3>

<p>Always create a feature branch for any new code. Use the following naming scheme: <code class="inline">github-user-name-feature-name</code> (so who owns the branch and what purpose it serves can quickly be determined). Start with a branch based on master.</p>
<pre><code class="elixir">% git checkout master
% git pull
% git checkout -b github-user-name-feature-name</code></pre>
<p>Pull in new changes on master frequently to avoid major conflicts.</p>
<pre><code class="elixir">% git fetch origin
% git rebase origin/master</code></pre>
<p>When the feature is complete, make sure the tests pass.</p>
<pre><code class="elixir">% mix test</code></pre>
<p>It’s also a good idea to run any <a href="#code-style">code style checks</a>.</p>
<p>Make a pull request when the feature is complete. Write a <a href="http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">good commit message</a>.</p>
<pre><code class="elixir">% git add -A
% git status
% git commit -v</code></pre>
<p>Push to Github and create a pull request.</p>
<pre><code class="elixir">% git push origin github-user-name-feature-name</code></pre>
<p>Open a PR with a descriptive name and full description. Explain the nature of the change, the motivation for the change, and the thinking behind the implementation. Add links to supporting material and/or reference related issues. Tag the PR with the <code class="inline">needs-review</code> label and await peer review.</p>
<p>After CI passes and you get an approved PR review, merge the changes into master.</p>
<p>First, rebase. Pick only commits that are necessary. Squash others.</p>
<pre><code class="elixir">% git fetch origin
% git rebase -i origin/master</code></pre>
<p>View the changelog, merge and push.</p>
<pre><code class="elixir">% git log origin/master..github-user-name-feature-name
% git diff --stat origin/master
% git checkout master
% git merge github-user-name-feature-name --ff-only
% git push</code></pre>
<p>Clean up remote and local branches.</p>
<pre><code class="elixir">% git push origin --delete github-user-name-feature-name
% git branch -d github-user-name-feature-name</code></pre>
<h3 id="deploying" class="section-heading">
  <a href="#deploying" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Deploying
</h3>

<p>Custodian is hosted on Heroku. Currently only a productio instance is available. Deploying is a simple git push:</p>
<pre><code class="elixir">% git push production</code></pre>
<h3 id="external-services" class="section-heading">
  <a href="#external-services" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  External Services
</h3>

<ul>
<li>Performance metrics and error tracking via <a href="https://appsignal.com">AppSignal</a>
</li>
</ul>
<h3 id="architecture-notes" class="section-heading">
  <a href="#architecture-notes" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Architecture Notes
</h3>

<ul>
<li>Runs on Erlang 20.2
</li>
<li>Runs on Elixir 1.5.3
</li>
<li>Runs on Phoenix 1.3
</li>
<li>Uses PostgreSQL as a relational data store
</li>
<li>Uses ExUnit for testing
</li>
<li>Deployed to Heroku
</li>
</ul>
<h2 id="license" class="section-heading">
  <a href="#license" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  License
</h2>

<p>Custodian is copyright (c) 2017 NewAperio, LLC. It is licensed under the terms in the <a href="/LICENSE.md">LICENSE</a> file.</p>
<h2 id="about-newaperio" class="section-heading">
  <a href="#about-newaperio" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  About NewAperio
</h2>

<p>Custodian is built by <a href="https://newaperio.com">NewAperio, LLC</a>.</p>
<p>NewAperio is a web and mobile design and development studio with offices in Baton Rouge, LA and Denver, CO.</p>

      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.18.1),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
            </span>
        </p>
        <button class="night-mode-toggle"><span class="sr-only">Switch theme</span></button>
      </footer>
    </div>
  </div>
</section>
</div>
  <script src="dist/app-778c9ef903.js"></script>
  
  
  
  
  </body>
</html>

